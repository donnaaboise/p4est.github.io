<!doctype html>
<html lang="en">
<head>
<title>p4est 2020 HCM Summer School: Tutorial 0</title>
<meta name="author" content="Carsten Burstedde">
<link type="text/css" rel="stylesheet" href="p4est.css">
<link type="text/css" rel="stylesheet" href="added.css">
<!-- mathjax !-->
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</head>
<body>

<header>
<h1><tt>p4est</tt> 2020 HCM Summer School: Tutorial 0</h1>
<nav>
<div class="nav-container">
<h2 class="nav-item"><a href="index.html" alt="p4est main page">Main</a></h2>
<h2 class="nav-item">
<a href="gallery.html" alt="p4est Galery of Research Results">Gallery</a></h2>
<h2 class="nav-item">
<a href="cite.html" alt="p4est Citations and Bibliography">Cite</a></h2>
<h2 class="nav-item">
<a href="school.html" alt="p4est 2020 HCM Summer School">School</a></h2>
</div>
</nav>
</header>

<main>
<p>
We are organizing a <tt>p4est</tt> summer school
sponsored by the
<a href="https://www.hcm.uni-bonn.de">Hausdorff Center for Mathematics</a>
at the <a href="https://www.uni-bonn.de/">University of Bonn</a>, Germany.
Please see also the school's <a
href="https://www.hcm.uni-bonn.de/events/eventpages/hausdorff-school/hausdoff-school-2020/the-p4est-software-for-parallel-amr/">home
page and application forms</a>.
</p>

<article>
<h2>Building the Library</h2>
<p class="book">
We distribute <tt>p4est</tt> as source code.
The usual way to work with it is to download it in one of severaly
possible ways and to compile it.
This generates a binary software library and some ready-to-run examples that
come with it.
There exist contributed binary packages for some operating system distributions,
which let you get away without compiling <tt>p4est</tt> yourself.
In this tutorial, we talk about the most common ways to build the software
and to write your own hello-world example program.
</p>
<p class="book">
If you are working with a Debian Linux distribution, you may install
<a href="https://packages.debian.org/search?keywords=libp4est-dev&searchon=names&suite=all&section=all">libp4est-dev</a>
using the Debian package manager.
We are thankful to the maintainers for compiling and packaging the
code in this convenient binary form.
You get a frozen and stable version of the code with the least amount of
hassle, but cannot contribute back to the software this way.
</p>
<p class="book">
Alternatively, you may find the <a
href="https://p4est.github.io/release/p4est-2.2.tar.gz">
latest tarball</a> online, unpack it, then run configure and make.
If you specify an installation prefix to configure and run make install,
you will find the libraries and example programs in their proper directory.
From here on, you may include the <tt>p4est</tt> header files in your own
source code and link your program to the library.
This method is fine to get going, or to provide a <tt>p4est</tt> installation
to other software that requires it to compile.
As with the binary package, you get a frozen and stable but relatively old
version of the code.
</p>
<p class="book">
A more active way of getting involved is to clone the
<a href="https://www.github.com/cburstedde/p4est.git">p4est github
repository</a>.
This requires to know how to use the revision control tool
<a href="https://git-scm.com/">git</a> or one of its many gui frontends.
We recommend to use the branch
<a href="https://github.com/cburstedde/p4est/tree/prev3-develop">prev3-develop</a>,
which has minimized dependencies and contains the most modern set of
algorithms.
Using the source code on github enables you to contribute to the software
in the future and to receive latest updates by calling git pull.
Note that the tarballs generated by github do not work.
We do not include the configure script on github either.
To generate it, call the
<a href="https://github.com/cburstedde/p4est/blob/prev3-develop/bootstrap">./bootstrap</a>
script in the p4est toplevel source directory.
This requires a working installation of GNU
<a href="https://www.gnu.org/software/autoconf/manual/">autoconf</a>,
<a href="https://www.gnu.org/software/automake/manual/">automake</a> and
<a href="https://www.gnu.org/software/libtool/manual/">libtool</a>.
</p>
<p class="book">
Suppose now that we have a local <tt>p4est</tt> source code directory
with an existing configure file.
If it is missing or other things are funny with the autoconf system, calling
bootstrap should fix it.
You may build <tt>p4est</tt> with MPI or without it.
My personal recommendation is to use <a href="https://www.mpich.org/">MPICH</a>,
either from a binary package or manually compiled.
Make sure your PATH environment variable includes the MPICH binaries such as
mpicc and mpirun.
We recommend the following procedure to build <tt>p4est</tt>.
</p>
<ol class="book">
<li><code>configure --help</code> prints a list of available options to configure.
When working with the branch prev3-develop, defaults are usually ok.</li>
<li>Make a directory parallel to the <tt>p4est</tt> source and
decide on a directory for installation (the latter not necessary for general
hacking).</li>
<li>Make a relative call such as <code>MPICC=mpicc ../path-to-source/configure
CFLAGS="-Wall -Wuninitialized -O0 -g" --prefix=path-to-install</code>.</li>
<li>Call <code>make -j8 V=0</code> to build the software.
The <code>-j</code> switch allows for parallel make processes, speeding up the
build a lot, and <code>V=0</code> disables echoing the compile command
line.</li>
<li>If you're curious, call <code>make -j2 check V=0</code>.
This will compile and execute our complimentary test programs.</li>
<li>If you have specified an installation prefix, you can run
<code>make -j10 install V=0</code>.
This call will neatly arrange all exported header files, library files,
binaries, and some configuration files in mostly standard-conforming
directories.</li>
<li>If you're preparing a code version that shall be clean enough to
create a tarball from it in the future, run
<code>make distcheck</code>.
If all goes well and after all warnings have been eliminated,
you will be presented with a brandnew <code>.tar.gz</code> including your
contributions.</li>
</ol>
<p class="book">
</p>
<ul class="book">
<li>Motivation and usefulness</li>
<li>Required skills</li>
<li>Skills acquired</li>
<li>The different steps to accomplish</li>
<li>Expected and unexpected results</li>
<li>Additional material:
<ol>
See also the
<a href="https://github.com/cburstedde/p4est/blob/prev3-develop/INSTALL">installation
document</a> in the source.
</ol>
</li>
<li>Next steps (with links?)</li>
</ul>
</article>
</main>

</body>
</html>
